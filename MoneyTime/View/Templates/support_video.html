<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoneyTime Support</title>
</head>
<body style="margin: 0; padding: 0; height: 100vh; background-color: #000; display: flex; justify-content: center; align-items: center; overflow: hidden; user-select: none;">
    
    <video 
        id="trollVideo"
        autoplay 
        muted 
        loop
        playsinline
        preload="auto"
        style="width: 90%; max-height: 90vh; max-width: 1200px; border-radius: 10px; box-shadow: 0 0 20px rgba(255,255,255,0.1); outline: none; pointer-events: none;">
        <source src="{{ url_for('static', filename='video trol windah.mp4') }}" type="video/mp4">
        Browser Anda tidak mendukung pemutaran video ini.
    </video>

    <div id="interactionOverlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 9999;"></div>

    <script>
        const video = document.getElementById('trollVideo');

        // 1. Fungsi untuk menyalakan suara (Unmute) dengan aman
        function enableSound() {
            if (video.muted) {
                video.muted = false;
                video.volume = 1.0;
            }
            // Pastikan video berputar
            if (video.paused) {
                video.play().catch(e => console.log("Play error ignored:", e));
            }
        }

        // 2. Event Listeners untuk interaksi user (Mouse/Keyboard/Touch)
        // Ini akan mengaktifkan suara begitu user melakukan apa saja
        const userInteractions = ['click', 'mousemove', 'keydown', 'touchstart', 'scroll', 'mouseenter'];
        userInteractions.forEach(event => {
            document.addEventListener(event, enableSound, { once: true });
        });

        // 3. Mekanisme Anti-Pause yang Lebih Stabil (setInterval)
        // Menggunakan interval cek setiap 500ms jauh lebih aman daripada event listener 'pause'
        // yang bisa menyebabkan infinite loop (browser hang/freeze).
        setInterval(() => {
            if (video.paused) {
                video.play().catch(() => {
                    // Jika gagal play (misal karena tab tidak aktif), biarkan mute dulu
                    video.muted = true;
                    video.play();
                });
            }
        }, 500);

        // 4. Disable Klik Kanan & Shortcut Keyboard
        document.addEventListener('contextmenu', event => event.preventDefault());
        document.addEventListener('keydown', function(event) {
            // Unmute jika tombol ditekan
            enableSound(); 
            // Blokir tombol navigasi video
            if (['Space', 'KeyK', 'KeyM', 'ArrowRight', 'ArrowLeft'].includes(event.code)) {
                event.preventDefault();
            }
        });
    </script>

</body>
</html>